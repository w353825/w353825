<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>取号</title>
	<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
</head>
<body>
<h1>取号</h1>
<input type="button" value="在线取号" id='btnAjax'>

<script type="text/javascript">

$.ajax({
        url:'https://m.client.10010.com/mobileService/customer/toCallNumber.htm?',
        data:{deviceId:deviceId(),hallId:'17b0cn0'},
        type:("POST"),
        crossDomain:true,
        xhrFields:{
            withCredentials:true
        },
        success:function(list){
		    console.log(list)
            if(list.Result == true){               
                 if (_callback){
                    var func = TM[_callback];
                    if (typeof func == "function") {
                        func(list.Data);
                    }
                 }
            }else{
                if(list.Msg){
                    alert(list.Msg);
                }else{
                    alert("操作失败");
                }
            }
        },
        error:function(){
            alert("网络错误，请稍后重试");
        }
    });	

function deviceId() {
  e=Math.floor(9e6 * Math.random()) + 1e6
  t = (new Date).getTime()
  return e+""+t 
}
</script>
</body>
</html>
